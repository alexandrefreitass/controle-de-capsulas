# ==============================================================================
# ✅ ARQUIVO DE CONFIGURAÇÃO DEFINITIVO PARA O REPLIT
# Autor: Seu nome de Engenheiro
# Versão: 2.0 (A que funciona)
# ==============================================================================

# Ponto de entrada (ajuda o Replit a entender o projeto)
entrypoint = "frontend/src/index.js"

# Comando a ser executado quando você aperta o botão "Run".
# Usa o concurrently que configuramos no package.json para subir BE e FE.
run = "cd frontend && npm start"

# O CORAÇÃO DA NOSSA AUTOMAÇÃO:
# Executado uma vez no boot para instalar TUDO.
onBoot = """
echo "--- [BOOT] Iniciando setup do ambiente Full Stack ---"
echo "--- [BOOT] Configurando Backend (Python/Django)... ---"
cd backend
python3 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
python manage.py migrate
echo "--- [BOOT] Backend configurado. ---"

echo "--- [BOOT] Configurando Frontend (Node/React)... ---"
cd ../frontend
npm install
echo "--- [BOOT] Frontend configurado. ---"

cd ..
echo "--- [BOOT] Ambiente pronto para decolar! ---"
"""

# Diz ao Replit para não tentar adivinhar ou gerenciar nossos pacotes.
# Nós temos o controle com venv e npm.
[packager]
language = "python3"
  [packager.features]
  packageSearch = false
  guessImports = false

# Aponta a aba "Webview" para a porta do nosso servidor do React.
[hosting]
port = 3000
ignoredFiles = ["node_modules", ".cache", "venv", ".venv", "backend", ".git"]